<!DOCTYPE html>
<html>
<head>
    <title>JSON Tagger - JSON API for Stagger</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Raleway:400,300,600' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.5.0/pure-min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/railscasts.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
    <style>
        body, textarea {
            font: 1em/1.4 Raleway, sans-serif;
        }
        body {
            background: #EEE9E9;
            margin: 0 auto 4em;
            max-width: 96%;
            width: 600px;
        }
        h1 { font-family: "Raleway SemiBold", sans-serif; }
        h1, h2 { margin-bottom: -0.25em; }
        li, dt { margin-bottom: 0.5em; }
        dd { margin-bottom: 1em; }
            dd em {
                background: #FEF9F9;
                display: inline-block;
                padding: 2px 4px;
                font-style: normal;
                margin-top: 2px;
            }
        dt {
            font-style: italic;
            text-align: right;
            overflow: hidden;
            padding-right: 3px;
        }
            dt code {
                font-style: normal;
                font-weight: bold;
                float: left;
            }
        a {
            color: #0078E7;
        }
        ul.navigation {
            margin: 1em 0 0;
            padding: 0;
        }
            ul.navigation li {
                list-style: none;
                display: inline-block;
            }
        pre{
            font-size: 0.9em;
            max-height: 300px;
            overflow: auto;
        }
        textarea {
            font-size: 0.9em;
            margin-top: 1em;
        }
        form p { text-align: right; }
        button {
        }
        table td:first-child {
            border-right: 1px solid #CBCBCB;
        }
    </style>
</head>
<body>
    <h1>Hitta ordklasser och egennamn i svensk text</h1>
    <p>Med detta API kan du hitta <strong>ordklasser</strong> (substantiv, verb, adjektiv, ...) och <strong>egennamn</strong> (personer, platser och institutioner) i <strong>svensk text</strong>.</p>

    <h2>Skriv in en svensk mening:</h2>
    <form action="/api/tag" method="post" class="pure-form">
        <textarea id="data" name="data" class="pure-input-1" rows="4">Den skogsbrand som rasade i Västmanland lät sig endast med svårighet kuvas. Det var en katastrof som förstörde hus och hem och utplånade stora ekonomiska värden. Räddningstjänsten, försvaret, ortsbefolkningen och många frivilliga gjorde en beundransvärd insats för att begränsa och till sist också kontrollera elden.</textarea>
        <input type="hidden" name="pretty" value="1">
        <p><button type="submit" class="pure-button pure-button-primary">Prova API:et &raquo;</button></p>
    </form>

    <h2>Läs mer om API:et</h2>
    <ul class="navigation">
        <li><a href="#details" class="pure-button pure-button-primary">Om API:et</a></li>
        <li><a href="#basics" class="pure-button pure-button-primary">Göra anrop</a></li>
        <li><a href="#response" class="pure-button pure-button-primary">Svarsformat</a></li>
    </ul>

    <h2 id="details">Om API:et</h2>
    <p>API:et bygger på <a href="http://www.ling.su.se/english/nlp/tools/stagger">Stagger</a>, ett projekt vid Stockholms Universitet. Stagger gör allt grovarbete:</p>
    <ul class="long">
        <li><strong>Tokenisering av ord</strong> - Dela upp meningar i ord</li>
        <li><strong>Tokenisering av meningar</strong> - Gruppera orden i meningar</li>
        <li><strong>Lemmatisering</strong> - Hitta grundformen för varje ord</li>
        <li><strong>Ordklasstagging</strong> - Hitta varje ords ordklass, inklusive specifika egenskaper som singular/plural och passiva/aktiva former</li>
        <li><strong>Namnigenkänning</strong> - Hitta personnamn, platser och instutitioner</li>
    </ul>

    <p>JSON Tagger (detta projekt) gör Stagger lättare att använda:</p>
    <ul class="long">
        <li><strong>All data tillgänglig via JSON</strong>. Stagger kräver att man parsar data i <a href="http://ilk.uvt.nl/conll/#dataformat">CoNLL-format</a>, något som många inte känner till. JSON är betydligt vanligare, och passar bra för data i webbmiljö.</li>
        <li><strong>Slipp köra och underhålla en Java-miljö</strong>. JSON Tagger kör i molnet, så du behöver inte installera något själv.</li>
        <li><strong>Skiljer på ordklass och egennamn-delarna</strong>. Staggar blandar ihop data om ordklass och egennamn, JSON Tagger gör det enkelt att bara använda en den ena delen om du inte behöver båda.</li>
    </ul>

    <p>Att tänka på:</p>
    <ul class="long">
        <li>Ordklasstaggningen har väldigt hög precision (<a href="http://www.ling.su.se/english/nlp/tools/stagger">96,6%</a>). Namnigenkänning är betydlig svårare, därför är precisionen lägre (<a href="http://www.ling.su.se/english/nlp/tools/stagger">70,7%</a>). Ta med detta i beräkningen när du bygger applikationer baserat på API:et.</li>
        <li>Språkmodellen som kommer med Stagger är <strong>baserad på redaktionell text</strong>. Därför fungerar det bäst för nyhetsartiklar, produktbeskrivningar och liknande. Om du vill använda det för text från sociala medier behöver du använda en annan språkmodell. Den som används här kommer ge för dåligt resultat.
    </ul>

    <p>"Stagger" skapades av Robert Östling. "JSON Tagger" (detta projekt) skapades av <a href="http://twitter.com/EmilStenstrom">Emil Stenstrom</a></p>

    <h2 id="basics">Göra anrop</h2>
    <p>API:et kräver att du skickar en POST-request över HTTP. Det går att göra i alla plattformar och programmeringsspråk, men här är några av de vanligaste:</p>

    <h3>cURL (finns förinstallerat på alla Mac och Linux-datorer)</h3>
    <pre><code class="bash">curl {{ site }}/api/tag -d "Fördomen har har alltid sin rot i vardagslivet - Olof Palme"</code></pre>

    <h3>Python (med hjälp av <a href="http://docs.python-requests.org/en/latest/">requests</a>)</h3>
    <pre><code class="python">import requests
r = requests.post("{{ site }}/api/tag", data="Fördomen har har alltid sin rot i vardagslivet - Olof Palme")
print r.json()</code></pre>

    <h3>Ruby (med hjälp av <a href="https://github.com/tarcieri/http.rb">http.rb</a>)</h3>
    <pre><code class="ruby">require 'http'
r = HTTP.post("http://example.com/resource", :body => "Fördomen har har alltid sin rot i vardagslivet - Olof Palme")
puts r.to_s</code></pre>

    <h3>Node.js (med hjälp av <a href="https://github.com/request/request">request</a>)</h3>
    <pre><code class="javascript">var request = require('request');
request.post({url: '{{ site }}/api/tag', body: "Fördomen har har alltid sin rot i vardagslivet - Olof Palme"}, function (error, response, body) {
    console.log(body)
})</code></pre>

    <h2 id="response">Svaret från API:et</h2>
    <p>API:et returnerar <a href="http://www.json.org/">JSON</a>, ett format som det finns bibliotek för att läsa i alla programmeringsspråk.</p>

    <pre><code class="json">{
    "sentences": [
        [
            {
                "word_index": "1",
                "word_form": "Fördomen",
                "lemma": "fördom",
                "pos_tag": "NN",
                "morph_feat": "UTR|SIN|DEF|NOM",
                "token_id": "net:0:0"
            },
            {
                "word_index": "2",
                "word_form": "har",
                "lemma": "ha",
                "pos_tag": "VB",
                "morph_feat": "PRS|AKT",
                "token_id": "net:0:9"
            },
            {
                "word_index": "3",
                "word_form": "har",
                "lemma": "ha",
                "pos_tag": "VB",
                "morph_feat": "PRS|AKT",
                "token_id": "net:0:13"
            },
            {
                "word_index": "4",
                "word_form": "alltid",
                "lemma": "alltid",
                "pos_tag": "AB",
                "morph_feat": null,
                "token_id": "net:0:17"
            },
            {
                "word_index": "5",
                "word_form": "sin",
                "lemma": "sin",
                "pos_tag": "PS",
                "morph_feat": "UTR|SIN|DEF",
                "token_id": "net:0:24"
            },
            {
                "word_index": "6",
                "word_form": "rot",
                "lemma": "rot",
                "pos_tag": "NN",
                "morph_feat": "UTR|SIN|IND|NOM",
                "token_id": "net:0:28"
            },
            {
                "word_index": "7",
                "word_form": "i",
                "lemma": "i",
                "pos_tag": "PP",
                "morph_feat": null,
                "token_id": "net:0:32"
            },
            {
                "word_index": "8",
                "word_form": "vardagslivet",
                "lemma": "vardagsliv",
                "pos_tag": "NN",
                "morph_feat": "NEU|SIN|DEF|NOM",
                "token_id": "net:0:34"
            },
            {
                "word_index": "9",
                "word_form": "-",
                "lemma": "-",
                "pos_tag": "MID",
                "morph_feat": null,
                "token_id": "net:0:47"
            },
            {
                "word_index": "10",
                "word_form": "Olof",
                "lemma": "Olof",
                "pos_tag": "PM",
                "morph_feat": "NOM",
                "token_id": "net:0:49"
            },
            {
                "word_index": "11",
                "word_form": "Palme",
                "lemma": "Palme",
                "pos_tag": "PM",
                "morph_feat": "NOM",
                "token_id": "net:0:54"
            }
        ]
    ],
    "entities": [
        {
            "word_form": "Olof Palme",
            "lemma": "Olof Palme",
            "ne_type": "person",
            "token_ids": [
                "net:0:49",
                "net:0:54"
            ]
        }
    ]
}</code></pre>

    <h3>Förklaring av svarsformatet</h3>
    <dl>
        <dt><code>sentences</code></dt>
        <dd>
            En lista med meningar, som i sin tur består av ord. Varje ord har följande egenskaper:
            <dl>
                <dt><code>word_index</code></dt>
                <dd>Var i meningen som ordet finns. Första ordet har 1 som word_index, andra ordet har 2. Efter varje ny mening börjar word_index om från 1.<br>
                <em>Exempel: 2</em></dd>

                <dt><code>word_form</code></dt>
                <dd>Ordet som det skickades in till API:et, oförändrat.<br>
                <em>Exempel: "Fördomen"</em></dd>

                <dt><code>lemma</code></dt>
                <dd>Grundformen för detta ord, utan ändelser och böjningar.<br>
                <em>Exempel: "fördom"</em></dd>

                <dt><code>pos_tag</code></dt>
                <dd>Ordklassen för detta ord, som förkortningar med två eller tre bokstäver. En förklaring av <a href="#pos-tags">de olika ordklasstaggarna</a> hittar du nedan.<br>
                <em>Exempel: "NN"</em></dd>

                <dt><code>morph_feat</code></dt>
                <dd>Mer detaljerade egenskaper för just den här ordklassen, i form av trebokstavsförkortningar. Om det finns flera egenskaper skiljs dom med "|"-tecknet. Om det är osäkert vilken tagg som gäller kan flera taggar ges med "/" mellan. En förklaring av <a href="#morph-feat">de mer specifika taggarna</a> hittar du nedan.<br>
                <em>Exempel: "UTR|SIN|DEF|NOM"</em></dd>

                <dt><code>token_id</code></dt>
                <dd>Ett ID som beskriver var i originaltexten som detta ord hittades. Börjar alltid med "net", följt av ett kolon och numret på meningen där ordet stod (första meningen är noll), följt av ett kolon och det antal tecken från början där ordet stod (första tecknet är noll).<br>
                <em>Exempel: "net:0:0"</em></dd>
            </dl>
        </dd>

        <dt><code>entites</code></dt>
        <dd>
            En lista med egennamn som har identifierats i texten. Varje namn har följande egenskaper:
            <dl>
                <dt><code>word_form</code></dt>
                <dd>Ett eller flera ord, som de skickades in till API:et, oförändrat.<br>
                <em>Exempel: "Olof Palmes"</em></dd>

                <dt><code>lemma</code></dt>
                <dd>Sammanslagningen av ett eller flera grundformer för de ord som ingår i detta namn. Vanligtvis samma ord fast utan genetiv-"s".<br>
                <em>Exempel: "Olof Palme"</em></dd>

                <dt><code>ne_type</code></dt>
                <dd>Typen av namn som har hittats. Kan vara antingen "person", "place", "inst". Ibland hittas ett namn helt korrekt i texten, men fel typ returneras. Därför kan det vara bra att komplettera med egna listor med namn, platser och företagsnamn, och kontrollera om namnet finns med i dessa innan man litar på taggen som anges här. Testa med egen data innan du bestämmer dig för om det behövs i detta fall.<br>
                <em>Exempel: "person"</em></dd>

                <dt><code>token_ids</code></dt>
                <dd>En lista som de token_ids som ingår i detta namn. Om man vill kombinera egennamn och ordklasstaggning kan man alltså ta ID:n härifrån och slå upp ordklass för de ingående orden ovan.<br>
                <em>Exempel: ["net:0:49", "net:0:54"]</em></dd>
            </dl>
        </dd>
    </dl>

    <h2 id="pos-tags">Förklaring av ordklasstaggarna</h2>
    <p>Förkortningarna i <code>pos_tag</code> motsvarar alltså ordklasser. Ordklasserna (både dessa och de mer specifika nedan) kommer från ett projekt som heter <a href="http://spraakbanken.gu.se/eng/resources/suc">Stockholm Umeå Corpus</a>. Över en miljon ord har manuellt taggats, och denna databas har sen använts för att träna Stagger.</p>

    <table class="pure-table pure-table-striped">
        <thead>
            <tr>
                <th>Kod</th>
                <th>Ordklass</th>
                <th>Exempel</th>
            </tr>
        </thead>
        <tbody>
            <tr><td>AB</td><td>Adverb</td><td>inte</td></tr>
            <tr><td>DT</td><td>Determinerare</td><td>denna</td></tr>
            <tr><td>HA</td><td>Frågande/relativt adverb</td><td>när</td></tr>
            <tr><td>HD</td><td>Frågande/relativ determinerare</td><td>vilken</td></tr>
            <tr><td>HP</td><td>Frågande/relativt pronomen</td><td>som</td></tr>
            <tr><td>HS</td><td>Frågande/relativt possessivt pronomen</td><td>vars</td></tr>
            <tr><td>IE</td><td>Infinitivmärke</td><td>att</td></tr>
            <tr><td>IN</td><td>Interjektion</td><td>ja</td></tr>
            <tr><td>JJ</td><td>Adjektiv</td><td>glad</td></tr>
            <tr><td>KN</td><td>Konjunktion</td><td>och</td></tr>
            <tr><td>NN</td><td>Substantiv</td><td>pudding</td></tr>
            <tr><td>PC</td><td>Particip</td><td>utsänd</td></tr>
            <tr><td>PL</td><td>Partikel</td><td>ut</td></tr>
            <tr><td>PM</td><td>Egennamn</td><td>Mats</td></tr>
            <tr><td>PN</td><td>Pronomen</td><td>hon</td></tr>
            <tr><td>PP</td><td>Preposition</td><td>av</td></tr>
            <tr><td>PS</td><td>Possessivt pronomen</td><td>hennes</td></tr>
            <tr><td>RG</td><td>Grundtal</td><td>tre</td></tr>
            <tr><td>RO</td><td>Ordningstal</td><td>tredje</td></tr>
            <tr><td>SN</td><td>Subjunktion</td><td>att</td></tr>
            <tr><td>UO</td><td>Utländskt ord</td><td>the</td></tr>
            <tr><td>VB</td><td>Verb</td><td>kasta</td></tr>
            <tr><td>MAD</td><td>Major delimiter</td><td>. (punkt)</td></tr>
            <tr><td>MID</td><td>Minor delimiter</td><td>, (komma)</td></tr>
            <tr><td>PAD</td><td>Pairwise delimiter</td><td>- (streck)</td></tr>
        </tbody>
    </table>

    <h2 id="morph-feat">Förklaring av de mer specifika taggarna</h2>
    <p>Ordklasserna ovan är relativt grovkorniga. För att gå mer på djupet finns även speicika böjningsformer i <code>morph_feat</code>. Notera att femininum inte finns med bland genusformerna efter det inte påverkar böjningen.</p>

    <table class="pure-table pure-table-bordered">
        <thead>
            <tr>
                <th>Paradigm</th>
                <th>Kod</th>
                <th>Legend</th>
                <th>Gäller för...</th>
            </tr>
        </thead>
        <tbody>
            <tr class="pure-table-odd">
                <td rowspan="3"><strong>Genus</strong></td>
                <td>UTR</td>
                <td>Utrum</td>
                <td rowspan="3">DT, HD, HP, JJ, NN, PC, PN, PS, (RG, RO)</td>
            </tr>
            <tr class="pure-table-odd">
                <td>NEU</td>
                <td>Neutrum</td>
            </tr>
            <tr class="pure-table-odd">
                <td>MAS</td>
                <td>Maskulinum</td>
            </tr>

            <tr>
                <td rowspan="2"><strong>Numerus</strong></td>
                <td>SIN</td>
                <td>Singular</td>
                <td rowspan="2">DT, HD, HP, JJ, NN, PC, PN, PS, (RG, RO)</td>
            </tr>
            <tr>
                <td>PLU</td>
                <td>Plural</td>
            </tr>

            <tr class="pure-table-odd">
                <td rowspan="2"><strong>Species</strong></td>
                <td>IND</td>
                <td>Obestämd</td>
                <td rowspan="2">DT, (HD, HP, HS), JJ, NN, PC, PN, (PS, RG, RO)</td>
            </tr>
            <tr class="pure-table-odd">
                <td>DEF</td>
                <td>Bestämd</td>
            </tr>

            <tr>
                <td rowspan="2"><strong>Kasus</strong></td>
                <td>NOM</td>
                <td>Nominativ</td>
                <td rowspan="2">JJ, NN, PC, PM, (RG, RO)</td>
            </tr>
            <tr>
                <td>GEN</td>
                <td>Genitiv</td>
            </tr>

            <tr class="pure-table-odd">
                <td rowspan="4"><strong>Tempus</strong></td>
                <td>PRS</td>
                <td>Presens</td>
                <td rowspan="4">VB</td>
            </tr>
            <tr class="pure-table-odd">
                <td>PRT</td>
                <td>Imperfekt/Preteritum</td>
            </tr>
            <tr class="pure-table-odd">
                <td>SUP</td>
                <td>Supinum</td>
            </tr>
            <tr class="pure-table-odd">
                <td>INF</td>
                <td>Infinitiv</td>
            </tr>

            <tr>
                <td rowspan="2"><strong>Diates</strong></td>
                <td>AKT</td>
                <td>Aktivium</td>
                <td rowspan="2">VB</td>
            </tr>
            <tr>
                <td>SFO</td>
                <td>Passivum</td>
            </tr>

            <tr class="pure-table-odd">
                <td><strong>Modus</strong></td>
                <td>KON</td>
                <td>Konjunktiv</td>
                <td>VB</td>
            </tr>

            <tr>
                <td rowspan="2"><strong>Particip</strong></td>
                <td>PRS</td>
                <td>Presens particip</td>
                <td rowspan="2">PC</td>
            </tr>
            <tr>
                <td>PRF</td>
                <td>Perfekt particip</td>
            </tr>

            <tr class="pure-table-odd">
                <td rowspan="3"><strong>Komparation</strong></td>
                <td>POS</td>
                <td>Positiv</td>
                <td rowspan="3">(AB), JJ</td>
            </tr>
            <tr class="pure-table-odd">
                <td>KOM</td>
                <td>Komparativ</td>
            </tr>
            <tr class="pure-table-odd">
                <td>SUV</td>
                <td>Superlativ</td>
            </tr>

            <tr>
                <td rowspan="2"><strong>Pronomenform</strong></td>
                <td>SUB</td>
                <td>Subjekt</td>
                <td rowspan="2">PN</td>
            </tr>
            <tr>
                <td>OBJ</td>
                <td>Objekt</td>
            </tr>

            <tr class="pure-table-odd">
                <td><strong>Sammansatt</strong></td>
                <td>SMS</td>
                <td>Sammansättningsform</td>
                <td>Alla ordklasser</td>
            </tr>
        </tbody>
    </table>

    <script>hljs.initHighlightingOnLoad();</script>
</body>
</html>
