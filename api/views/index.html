<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>JSON Tagger - Hitta ordklasser och grundform för ord i svensk text</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.5.0/pure-min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/railscasts.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
    <style>
        body, textarea {
            font: 1em/1.4 Raleway, sans-serif;
        }
        body {
            background: #EEE9E9;
            margin: 0 auto 4em;
            max-width: 96%;
            width: 600px;
        }
        h1 { font-family: "Raleway SemiBold", sans-serif; }
        h1, h2 { margin-bottom: -0.25em; }
        li, dt { margin-bottom: 0.5em; }
        dd { margin-bottom: 1em; }
            dd em {
                background: #FEF9F9;
                display: inline-block;
                padding: 2px 4px;
                font-style: normal;
                margin-top: 2px;
            }
        dt {
            font-style: italic;
            text-align: right;
            overflow: hidden;
            padding-right: 3px;
        }
            dt code {
                font-style: normal;
                font-weight: bold;
                float: left;
            }
        a {
            color: #0078E7;
        }
        ul.navigation {
            margin: 1em 0 0;
            padding: 0;
        }
            ul.navigation li {
                list-style: none;
                display: inline-block;
            }
        pre{
            font-size: 0.9em;
            max-height: 300px;
            overflow: auto;
        }
        textarea {
            font-size: 0.9em;
            margin-top: 1em;
        }
        form p { text-align: right; }
        button {
        }
        table td:first-child {
            border-right: 1px solid #CBCBCB;
        }
    </style>
</head>
<body>
    <h1>Hitta ordklass och grundform för ord i svensk text</h1>
    <p>Med detta API kan du hitta <strong>ordklass</strong> (substantiv, verb, adjektiv, ...) och <strong>grundform</strong> (programmet -> program) för ord i <strong>svensk text</strong>.</p>

    <h2>Skriv in en svensk mening:</h2>
    <form action="/tag" method="post" class="pure-form">
        <textarea id="data" name="data" class="pure-input-1" rows="4">Den skogsbrand som rasade i Västmanland lät sig endast med svårighet kuvas. Det var en katastrof som förstörde hus och hem och utplånade stora ekonomiska värden. Räddningstjänsten, försvaret, ortsbefolkningen och många frivilliga gjorde en beundransvärd insats för att begränsa och till sist också kontrollera elden.</textarea>
        <input type="hidden" name="pretty" value="1">
        <p><button type="submit" class="pure-button pure-button-primary">Prova API:et &raquo;</button></p>
    </form>

    <h2>Läs mer om API:et</h2>
    <ul class="navigation">
        <li><a href="#details" class="pure-button pure-button-primary">Om API:et</a></li>
        <li><a href="#basics" class="pure-button pure-button-primary">Göra anrop</a></li>
        <li><a href="#response" class="pure-button pure-button-primary">Svarsformat</a></li>
    </ul>

    <h2 id="details">Om API:et</h2>
    <p>API:et bygger på <a href="https://github.com/robertostling/efselab">efselab</a>, ett projekt vid Stockholms Universitet. Efselab gör allt grovarbete:</p>
    <ul class="long">
        <li><strong>Tokenisering av meningar och ord</strong> - Bryt isär texten i ord, och gruppera orden i meningar</li>
        <li><strong>Ordklasstaggning</strong> - Hitta varje ords ordklass, inklusive specifika egenskaper som singular/plural och passiva/aktiva former</li>
        <li><strong>Grundform</strong> - Hitta varje ords grundform</li>
        <li><strong>Prestanda</strong> - Även stora datamängder på kort tid, och med väldigt lite minne vilket gör att jag kan köra allt på en billig server</li>
    </ul>

    <p>JSON Tagger (detta projekt) lägger till:</p>
    <ul class="long">
        <li><strong>Gör all data tillgänglig via JSON</strong>. Efselab kräver att installerar C-program och tränar upp en datamodell, något som många inte kan göra själv. JSON förstår sig betydligt fler på, och det passar dessutom bra för data i webbmiljö.</li>
        <li><strong>Dokumenterar</strong> vad taggarna som efselab returnerar betyder (se nedan).</li>
    </ul>

    <p>Att tänka på:</p>
    <ul class="long">
        <li>Ordklasstaggningen bygger på samma modell som Stagger gör, och Stagger har dokumenterat väldigt hög precision (<a href="http://www.ling.su.se/english/nlp/tools/stagger">96,6%</a>).</li>
        <li>Språkmodellen som efselab är tränad på heter SUC, <a href="http://spraakbanken.gu.se/eng/resources/suc">Stockholm Umeå Corpus</a>, och är främst <strong>baserad på redaktionell text</strong>. Därför fungerar det bäst för nyhetsartiklar, produktbeskrivningar och liknande.</li>
    </ul>

    <p>Vem ligger bakom detta?</p>
    <ul>
        <li><a href="https://github.com/robertostling/efselab">efselab</a> skapades av <a href="http://www.ling.su.se/om-oss/kontakt/presentationer-medarbetare/m-%C3%B6/robert-%C3%B6stling-1.14962">Robert Östling</a>.</li>
        <li>JSON Tagger (detta projekt) skapades av <a href="http://twitter.com/EmilStenstrom">Emil Stenström</a>.</li>
    </ul>

    <p>Vill du använda API:et?</p>
    <ul>
        <li>Då är det fritt fram! Du behöver inte fråga om lov först, men du får gärna skicka ett meddelande till <a href="http://twitter.com/EmilStenstrom">mig på Twitter</a> och berätta vad du använt det till!</li>
    </ul>

    <h2 id="basics">Göra anrop</h2>
    <p>API:et kräver att du skickar en POST-request över HTTP. Det går att göra i alla plattformar och programmeringsspråk, men här är några av de vanligaste:</p>

    <h3>cURL (finns förinstallerat på alla Mac och Linux-datorer)</h3>
    <pre><code class="bash">curl {{ site }}/tag -d "Fördomen har alltid sin rot i vardagslivet - Olof Palme"</code></pre>

    <h3>Python 2 (med hjälp av <a href="http://docs.python-requests.org/en/latest/">requests</a>)</h3>
    <pre><code class="python"># -*- coding: utf-8 -*-
import requests
r = requests.post("{{ site }}/tag", data=u"Fördomen har alltid sin rot i vardagslivet - Olof Palme".encode("utf-8"))
print r.json()</code></pre>

    <h3>Python 3 (med hjälp av <a href="http://docs.python-requests.org/en/latest/">requests</a>)</h3>
    <pre><code class="python">import requests
r = requests.post("{{ site }}/tag", data="Fördomen har alltid sin rot i vardagslivet - Olof Palme".encode("utf-8"))
print r.json()</code></pre>

    <h3>Ruby (med hjälp av <a href="https://github.com/tarcieri/http.rb">http.rb</a>)</h3>
    <pre><code class="ruby">require 'http'
r = HTTP.post("{{ site }}/tag", :body => "Fördomen har alltid sin rot i vardagslivet - Olof Palme")
puts r.to_s</code></pre>

    <h3>Node.js (med hjälp av <a href="https://github.com/request/request">request</a>)</h3>
    <pre><code class="javascript">var request = require('request');
request.post({url: '{{ site }}/tag', body: "Fördomen har alltid sin rot i vardagslivet - Olof Palme"}, function (error, response, body) {
    console.log(body)
})</code></pre>

    <h2 id="response">Svaret från API:et</h2>
    <p>API:et returnerar <a href="http://www.json.org/">JSON</a>, ett format som det finns bibliotek för att läsa i alla programmeringsspråk.</p>

    <pre><code class="json">{
    "sentences": [
        [
            {
                "word_index": "1",
                "word_form": "Fördomen",
                "lemma": "fördom",
                "pos_tag": "NN",
                "morph_feat": "UTR|SIN|DEF|NOM",
                "token_id": "tok:0:0"
            },
            {
                "word_index": "2",
                "word_form": "har",
                "lemma": "ha",
                "pos_tag": "VB",
                "morph_feat": "PRS|AKT",
                "token_id": "tok:0:1"
            },
            {
                "word_index": "3",
                "word_form": "alltid",
                "lemma": "alltid",
                "pos_tag": "AB",
                "morph_feat": null,
                "token_id": "tok:0:2"
            },
            {
                "word_index": "4",
                "word_form": "sin",
                "lemma": "sin",
                "pos_tag": "PS",
                "morph_feat": "UTR|SIN|DEF",
                "token_id": "tok:0:3"
            },
            {
                "word_index": "5",
                "word_form": "rot",
                "lemma": "rot",
                "pos_tag": "NN",
                "morph_feat": "UTR|SIN|IND|NOM",
                "token_id": "tok:0:4"
            },
            {
                "word_index": "6",
                "word_form": "i",
                "lemma": "i",
                "pos_tag": "PP",
                "morph_feat": null,
                "token_id": "tok:0:5"
            },
            {
                "word_index": "7",
                "word_form": "vardagslivet",
                "lemma": "vardagsliv",
                "pos_tag": "NN",
                "morph_feat": "NEU|SIN|DEF|NOM",
                "token_id": "tok:0:6"
            },
            {
                "word_index": "8",
                "word_form": "-",
                "lemma": "-",
                "pos_tag": "MID",
                "morph_feat": null,
                "token_id": "tok:0:7"
            },
            {
                "word_index": "9",
                "word_form": "Olof",
                "lemma": "Olof",
                "pos_tag": "PM",
                "morph_feat": "NOM",
                "token_id": "tok:0:8"
            },
            {
                "word_index": "10",
                "word_form": "Palme",
                "lemma": "Palme",
                "pos_tag": "PM",
                "morph_feat": "NOM",
                "token_id": "tok:0:9"
            }
        ]
    ]
}</code></pre>

    <h3>Förklaring av svarsformatet</h3>
    <dl>
        <dt><code>sentences</code></dt>
        <dd>
            En lista med meningar, som i sin tur består av ord. Varje ord har följande egenskaper:
            <dl>
                <dt><code>word_form</code></dt>
                <dd>Ordet som det skickades in till API:et, oförändrat.<br>
                <em>Exempel: "Fördomen"</em></dd>

                <dt><code>lemma</code></dt>
                <dd>Grundformen för detta ord.<br>
                <em>Exempel: "fördom"</em></dd>

                <dt><code>pos_tag</code></dt>
                <dd>Ordklassen för detta ord, som förkortningar med två eller tre bokstäver. En förklaring av <a href="#pos-tags">de olika ordklasstaggarna</a> hittar du nedan.<br>
                <em>Exempel: "NN"</em></dd>

                <dt><code>morph_feat</code></dt>
                <dd>Mer detaljerade egenskaper för just den här ordklassen, i form av trebokstavsförkortningar. Om det finns flera egenskaper skiljs dom med "|"-tecknet. Om det är osäkert vilken tagg som gäller kan flera taggar ges med "/" mellan. En förklaring av <a href="#morph-feat">de mer specifika taggarna</a> hittar du nedan.<br>
                <em>Exempel: "UTR|SIN|DEF|NOM"</em></dd>

                <dt><code>token_id</code></dt>
                <dd>Ett ID som beskriver var i originaltexten som detta ord hittades. Börjar alltid med "net", följt av ett kolon och numret på meningen där ordet stod (första meningen är noll), följt av ett kolon och det antal tecken från början där ordet stod (första tecknet är noll).<br>
                <em>Exempel: "tok:0:0"</em></dd>
            </dl>
        </dd>
    </dl>

    <h2 id="pos-tags">Förklaring av ordklasstaggarna</h2>
    <p>Förkortningarna i <code>pos_tag</code> motsvarar alltså ordklasser. Ordklasserna (både dessa och de mer specifika nedan) kommer från ett projekt som heter <a href="http://spraakbanken.gu.se/eng/resources/suc">Stockholm Umeå Corpus</a>. Över en miljon ord har manuellt taggats, och denna databas har sen använts för att träna efselab.</p>

    <table class="pure-table pure-table-striped">
        <thead>
            <tr>
                <th>Kod</th>
                <th>Ordklass</th>
                <th>Exempel</th>
            </tr>
        </thead>
        <tbody>
            <tr><td>AB</td><td>Adverb</td><td>inte</td></tr>
            <tr><td>DT</td><td>Determinerare</td><td>denna</td></tr>
            <tr><td>HA</td><td>Frågande/relativt adverb</td><td>när</td></tr>
            <tr><td>HD</td><td>Frågande/relativ determinerare</td><td>vilken</td></tr>
            <tr><td>HP</td><td>Frågande/relativt pronomen</td><td>som</td></tr>
            <tr><td>HS</td><td>Frågande/relativt possessivt pronomen</td><td>vars</td></tr>
            <tr><td>IE</td><td>Infinitivmärke</td><td>att</td></tr>
            <tr><td>IN</td><td>Interjektion</td><td>ja</td></tr>
            <tr><td>JJ</td><td>Adjektiv</td><td>glad</td></tr>
            <tr><td>KN</td><td>Konjunktion</td><td>och</td></tr>
            <tr><td>NN</td><td>Substantiv</td><td>pudding</td></tr>
            <tr><td>PC</td><td>Particip</td><td>utsänd</td></tr>
            <tr><td>PL</td><td>Partikel</td><td>ut</td></tr>
            <tr><td>PM</td><td>Egennamn</td><td>Mats</td></tr>
            <tr><td>PN</td><td>Pronomen</td><td>hon</td></tr>
            <tr><td>PP</td><td>Preposition</td><td>av</td></tr>
            <tr><td>PS</td><td>Possessivt pronomen</td><td>hennes</td></tr>
            <tr><td>RG</td><td>Grundtal</td><td>tre</td></tr>
            <tr><td>RO</td><td>Ordningstal</td><td>tredje</td></tr>
            <tr><td>SN</td><td>Subjunktion</td><td>att</td></tr>
            <tr><td>UO</td><td>Utländskt ord</td><td>the</td></tr>
            <tr><td>VB</td><td>Verb</td><td>kasta</td></tr>
            <tr><td>MAD</td><td>Meningsavslutare</td><td>. (punkt)</td></tr>
            <tr><td>MID</td><td>Meningsdelare</td><td>, (komma)</td></tr>
            <tr><td>PAD</td><td>Parvis skiljetecken</td><td>- (streck)</td></tr>
        </tbody>
    </table>

    <h2 id="morph-feat">Förklaring av de mer specifika taggarna</h2>
    <p>Ordklasserna ovan är relativt grovkorniga. För att gå mer på djupet finns även specifika böjningsformer i <code>morph_feat</code>. Notera att femininum inte finns med bland genusformerna eftersom det inte påverkar böjningen på svenska.</p>

    <table class="pure-table pure-table-bordered">
        <thead>
            <tr>
                <th>Paradigm</th>
                <th>Kod</th>
                <th>Legend</th>
                <th>Gäller för...</th>
            </tr>
        </thead>
        <tbody>
            <tr class="pure-table-odd">
                <td rowspan="3"><strong>Genus</strong></td>
                <td>UTR</td>
                <td>Utrum</td>
                <td rowspan="3">DT, HD, HP, JJ, NN, PC, PN, PS, (RG, RO)</td>
            </tr>
            <tr class="pure-table-odd">
                <td>NEU</td>
                <td>Neutrum</td>
            </tr>
            <tr class="pure-table-odd">
                <td>MAS</td>
                <td>Maskulinum</td>
            </tr>

            <tr>
                <td rowspan="2"><strong>Numerus</strong></td>
                <td>SIN</td>
                <td>Singular</td>
                <td rowspan="2">DT, HD, HP, JJ, NN, PC, PN, PS, (RG, RO)</td>
            </tr>
            <tr>
                <td>PLU</td>
                <td>Plural</td>
            </tr>

            <tr class="pure-table-odd">
                <td rowspan="2"><strong>Species</strong></td>
                <td>IND</td>
                <td>Obestämd</td>
                <td rowspan="2">DT, (HD, HP, HS), JJ, NN, PC, PN, (PS, RG, RO)</td>
            </tr>
            <tr class="pure-table-odd">
                <td>DEF</td>
                <td>Bestämd</td>
            </tr>

            <tr>
                <td rowspan="2"><strong>Kasus</strong></td>
                <td>NOM</td>
                <td>Nominativ</td>
                <td rowspan="2">JJ, NN, PC, PM, (RG, RO)</td>
            </tr>
            <tr>
                <td>GEN</td>
                <td>Genitiv</td>
            </tr>

            <tr class="pure-table-odd">
                <td rowspan="4"><strong>Tempus</strong></td>
                <td>PRS</td>
                <td>Presens</td>
                <td rowspan="4">VB</td>
            </tr>
            <tr class="pure-table-odd">
                <td>PRT</td>
                <td>Imperfekt/Preteritum</td>
            </tr>
            <tr class="pure-table-odd">
                <td>SUP</td>
                <td>Supinum</td>
            </tr>
            <tr class="pure-table-odd">
                <td>INF</td>
                <td>Infinitiv</td>
            </tr>

            <tr>
                <td rowspan="2"><strong>Diates</strong></td>
                <td>AKT</td>
                <td>Aktivum</td>
                <td rowspan="2">VB</td>
            </tr>
            <tr>
                <td>SFO</td>
                <td>Passivum</td>
            </tr>

            <tr class="pure-table-odd">
                <td rowspan="2"><strong>Modus</strong></td>
                <td>KON</td>
                <td>Konjunktiv</td>
                <td rowspan="2">VB</td>
            </tr>
            <tr class="pure-table-odd">
                <td>IMP</td>
                <td>Imperativ</td>
            </tr>

            <tr>
                <td rowspan="2"><strong>Particip</strong></td>
                <td>PRS</td>
                <td>Presens particip</td>
                <td rowspan="2">PC</td>
            </tr>
            <tr>
                <td>PRF</td>
                <td>Perfekt particip</td>
            </tr>

            <tr class="pure-table-odd">
                <td rowspan="3"><strong>Komparation</strong></td>
                <td>POS</td>
                <td>Positiv</td>
                <td rowspan="3">(AB), JJ</td>
            </tr>
            <tr class="pure-table-odd">
                <td>KOM</td>
                <td>Komparativ</td>
            </tr>
            <tr class="pure-table-odd">
                <td>SUV</td>
                <td>Superlativ</td>
            </tr>

            <tr>
                <td rowspan="2"><strong>Pronomenform</strong></td>
                <td>SUB</td>
                <td>Subjekt</td>
                <td rowspan="2">PN</td>
            </tr>
            <tr>
                <td>OBJ</td>
                <td>Objekt</td>
            </tr>

            <tr class="pure-table-odd">
                <td><strong>Sammansatt</strong></td>
                <td>SMS</td>
                <td>Sammansatt</td>
                <td>Alla ordklasser</td>
            </tr>

            <tr>
                <td><strong>Förkortning</strong></td>
                <td>AN</td>
                <td>Förkortning</td>
                <td>Alla ordklasser</td>
            </tr>
        </tbody>
    </table>

    <script>hljs.initHighlightingOnLoad();</script>
</body>
</html>
